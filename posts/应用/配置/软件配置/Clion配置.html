<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>Clion配置 | Fu Jinlong's Blog</title><meta name="author" content="ICEFJL"><meta name="copyright" content="ICEFJL"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="主题推荐我推荐使用新 UI + onedark 的组合（我目前所使用的）。 效果如下：  如果你使用的是旧版本的 UI，我之前经常使用的主题有以下三个：  Atom Material Icons 效果大概如下，这个一个用于将文件夹颜色更明亮的插件，新 UI 暂时不可用  material-theme-ui：插件主页 plugins.jetbrains.com&#x2F;plugin&#x2F;80">
<meta property="og:type" content="article">
<meta property="og:title" content="Clion配置">
<meta property="og:url" content="http://icefjl.github.io/posts/%E5%BA%94%E7%94%A8/%E9%85%8D%E7%BD%AE/%E8%BD%AF%E4%BB%B6%E9%85%8D%E7%BD%AE/Clion%E9%85%8D%E7%BD%AE.html">
<meta property="og:site_name" content="Fu Jinlong&#39;s Blog">
<meta property="og:description" content="主题推荐我推荐使用新 UI + onedark 的组合（我目前所使用的）。 效果如下：  如果你使用的是旧版本的 UI，我之前经常使用的主题有以下三个：  Atom Material Icons 效果大概如下，这个一个用于将文件夹颜色更明亮的插件，新 UI 暂时不可用  material-theme-ui：插件主页 plugins.jetbrains.com&#x2F;plugin&#x2F;80">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://icefjl.github.io/img/web/post6.webp">
<meta property="article:published_time" content="2023-10-20T13:36:52.000Z">
<meta property="article:modified_time" content="2023-11-29T07:19:49.000Z">
<meta property="article:author" content="ICEFJL">
<meta property="article:tag" content="Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://icefjl.github.io/img/web/post6.webp"><link rel="shortcut icon" href="/img/web/logo.png"><link rel="canonical" href="http://icefjl.github.io/posts/%E5%BA%94%E7%94%A8/%E9%85%8D%E7%BD%AE/%E8%BD%AF%E4%BB%B6%E9%85%8D%E7%BD%AE/Clion%E9%85%8D%E7%BD%AE.html"><link rel="preconnect" href="//fastly.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?025b5b66546875a0e89a0f8ac8d27dce";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://fastly.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://fastly.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Clion配置',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-11-29 15:19:49'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/all.min.css"><link rel="stylesheet" href="/css/my.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> { preloader.endLoading() })

if (false) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/web/avatar.jpg" onerror="onerror=null;src='/img/web/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">62</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">13</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">30</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fas fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/web/post6.webp')"><nav id="nav"><span id="blog-info"><a href="/" title="Fu Jinlong's Blog"></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fas fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Clion配置</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-10-20T13:36:52.000Z" title="发表于 2023-10-20 21:36:52">2023-10-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-11-29T07:19:49.000Z" title="更新于 2023-11-29 15:19:49">2023-11-29</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%BA%94%E7%94%A8/">应用</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%BA%94%E7%94%A8/%E9%85%8D%E7%BD%AE/">配置</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%BA%94%E7%94%A8/%E9%85%8D%E7%BD%AE/%E8%BD%AF%E4%BB%B6%E9%85%8D%E7%BD%AE/">软件配置</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Clion配置"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="主题推荐"><a href="#主题推荐" class="headerlink" title="主题推荐"></a>主题推荐</h1><p>我推荐使用新 UI + onedark 的组合（我目前所使用的）。</p>
<p>效果如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/blog/88e12615834ebf321da6affceb85ca9b_MD5.webp" alt="主题1"></p>
<p>如果你使用的是旧版本的 UI，我之前经常使用的主题有以下三个：</p>
<ol>
<li><p>Atom Material Icons 效果大概如下，这个一个用于将文件夹颜色更明亮的插件，新 UI 暂时不可用<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/blog/9fc7eb29ba080b68a52f75c538ab550f_MD5.webp" alt="fileicon"></p>
</li>
<li><p>material-theme-ui：插件主页 <a href="https://link.juejin.cn/?target=https://plugins.jetbrains.com/plugin/8006-material-theme-ui" title="https://plugins.jetbrains.com/plugin/8006-material-theme-ui">plugins.jetbrains.com&#x2F;plugin&#x2F;8006…</a></p>
</li>
<li><p>one-dark-theme：插件主页 <a href="https://link.juejin.cn/?target=https://plugins.jetbrains.com/plugin/11938-one-dark-theme" title="https://plugins.jetbrains.com/plugin/11938-one-dark-theme">plugins.jetbrains.com&#x2F;plugin&#x2F;1193…</a></p>
</li>
</ol>
<h1 id="编辑器与-clang-format-设置"><a href="#编辑器与-clang-format-设置" class="headerlink" title="编辑器与 clang-format 设置"></a>编辑器与 clang-format 设置</h1><h2 id="鼠标滚轮改变字体大小"><a href="#鼠标滚轮改变字体大小" class="headerlink" title="鼠标滚轮改变字体大小"></a>鼠标滚轮改变字体大小</h2><p>Editor -&gt; General -&gt; Change font size with Ctrl+Mouse Wheel 打上勾就行。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/blog/38d048c74f31da95d2718f2a160fc77a_MD5.webp" alt="mouse control"></p>
<h2 id="clang-format-的使用"><a href="#clang-format-的使用" class="headerlink" title="clang-format 的使用"></a>clang-format 的使用</h2><p>关于 clang-format 是什么，我截一段 chatgpt 的回答。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/blog/7419f7ee138374a549afd555cdfb27c4_MD5.webp" alt="clang-format简介"></p>
<p>CLion 是自带 clang-format 的，你只需要开启即可，他会自动扫描项目根目录下的 clang-format 文件进行相应的格式化，开启后你每次创建一个新项目他也会自动生成一个 clang-format 文件到项目根目录，这个文件配置是根据 CLion 默认的格式化的格式来的，如果想要更改格式化风格，只需要更改 clang-formt 配置文件即可。</p>
<p>一般来说，我们只需要配置基本风格就行，一个.clang-format 文件大概长这样：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/blog/1006bda458606b389bd355cb22603d24_MD5.webp" alt=".clang-format"></p>
<p>一般来说没有什么特殊需求，那么就只需要填写 BasedOnStyle 即可，是 Google 风格还是 LLVM 风格还是 Microsoft 风格，都取决于上述的前三行代码，后面的都可以不用写。我这个配置文件是想要使用 Google 的格式化风格，但是 Googel 风格默认的代码边距太短了，所以进行了一系列的调整。</p>
<p>下面是 CLion 如何开启 clang-format，开启后 CLion 对代码的格式化将会以你项目根目录的 clang-format 文件为主。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/blog/22d7bda4a10573bfba11ef3a28ff984e_MD5.webp" alt="clang-format1"></p>
<h3 id="我的-clang-format-配置"><a href="#我的-clang-format-配置" class="headerlink" title="我的 .clang-format 配置"></a>我的 .clang-format 配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line">BasedOnStyle: Google</span><br><span class="line">Language: Cpp</span><br><span class="line">AccessModifierOffset: -3</span><br><span class="line">AlignAfterOpenBracket: Align</span><br><span class="line">AlignConsecutiveMacros: AcrossComments</span><br><span class="line">AlignConsecutiveAssignments: AcrossComments</span><br><span class="line">AlignConsecutiveDeclarations: AcrossComments</span><br><span class="line">AlignEscapedNewlines: Left</span><br><span class="line">AlignOperands: true</span><br><span class="line">AlignTrailingComments: true</span><br><span class="line">AllowAllArgumentsOnNextLine: true</span><br><span class="line">AllowAllParametersOfDeclarationOnNextLine: true</span><br><span class="line">AllowShortBlocksOnASingleLine: Always</span><br><span class="line">AllowShortCaseLabelsOnASingleLine: true</span><br><span class="line">AllowShortFunctionsOnASingleLine: All</span><br><span class="line">AllowShortLambdasOnASingleLine: All</span><br><span class="line">AllowShortIfStatementsOnASingleLine: AllIfsAndElse</span><br><span class="line">AllowShortLoopsOnASingleLine: true</span><br><span class="line">AlwaysBreakAfterReturnType: None</span><br><span class="line">AlwaysBreakBeforeMultilineStrings: false</span><br><span class="line">AlwaysBreakTemplateDeclarations: Yes</span><br><span class="line">BinPackArguments: true</span><br><span class="line">BinPackParameters: true</span><br><span class="line">BraceWrapping:</span><br><span class="line">  AfterCaseLabel: false</span><br><span class="line">  AfterClass: true</span><br><span class="line">  AfterControlStatement: Always</span><br><span class="line">  AfterEnum: false</span><br><span class="line">  AfterFunction: true</span><br><span class="line">  AfterNamespace: false</span><br><span class="line">  AfterObjCDeclaration: false</span><br><span class="line">  AfterStruct: true</span><br><span class="line">  AfterUnion: true</span><br><span class="line">  AfterExternBlock: true</span><br><span class="line">  BeforeCatch: true</span><br><span class="line">  BeforeElse: true</span><br><span class="line"></span><br><span class="line">BreakBeforeBinaryOperators: None</span><br><span class="line">BreakBeforeBraces: Custom</span><br><span class="line">BreakBeforeInheritanceComma: false</span><br><span class="line">BreakInheritanceList: BeforeColon</span><br><span class="line">BreakBeforeTernaryOperators: true</span><br><span class="line">BreakConstructorInitializersBeforeComma: false</span><br><span class="line">BreakConstructorInitializers: BeforeColon</span><br><span class="line">BreakAfterJavaFieldAnnotations: false</span><br><span class="line">BreakStringLiterals: true</span><br><span class="line">ColumnLimit: 80</span><br><span class="line">CommentPragmas: &quot;^ NOLINT:&quot;</span><br><span class="line">CompactNamespaces: false</span><br><span class="line">ConstructorInitializerIndentWidth: 2</span><br><span class="line">ContinuationIndentWidth: 2</span><br><span class="line">Cpp11BracedListStyle: true</span><br><span class="line">DeriveLineEnding: true</span><br><span class="line">DerivePointerAlignment: true</span><br><span class="line">DisableFormat: false</span><br><span class="line">ExperimentalAutoDetectBinPacking: false</span><br><span class="line">FixNamespaceComments: true</span><br><span class="line">ForEachMacros:</span><br><span class="line">  - foreach</span><br><span class="line">  - Q_FOREACH</span><br><span class="line">  - BOOST_FOREACH</span><br><span class="line">IncludeBlocks: Regroup</span><br><span class="line">IncludeCategories:</span><br><span class="line">  - Regex: &#x27;^&lt;ext/.*.h&gt;&#x27;</span><br><span class="line">    Priority: 2</span><br><span class="line">    SortPriority: 0</span><br><span class="line">  - Regex: &#x27;^&lt;.*.h&gt;&#x27;</span><br><span class="line">    Priority: 1</span><br><span class="line">    SortPriority: 0</span><br><span class="line">  - Regex: &quot;^&lt;.*&quot;</span><br><span class="line">    Priority: 2</span><br><span class="line">    SortPriority: 0</span><br><span class="line">  - Regex: &quot;.*&quot;</span><br><span class="line">    Priority: 3</span><br><span class="line">    SortPriority: 0</span><br><span class="line">IncludeIsMainRegex: &quot;([-_](test|unittest))?$&quot;</span><br><span class="line">IncludeIsMainSourceRegex: &quot;&quot;</span><br><span class="line">IndentCaseLabels: true</span><br><span class="line">IndentGotoLabels: true</span><br><span class="line">IndentPPDirectives: None</span><br><span class="line">IndentWidth: 3</span><br><span class="line">IndentWrappedFunctionNames: false</span><br><span class="line">JavaScriptQuotes: Leave</span><br><span class="line">JavaScriptWrapImports: true</span><br><span class="line">KeepEmptyLinesAtTheStartOfBlocks: false</span><br><span class="line">MacroBlockBegin: &quot;&quot;</span><br><span class="line">MacroBlockEnd: &quot;&quot;</span><br><span class="line">MaxEmptyLinesToKeep: 1</span><br><span class="line">NamespaceIndentation: None</span><br><span class="line">ObjCBinPackProtocolList: Never</span><br><span class="line">ObjCBlockIndentWidth: 4</span><br><span class="line">ObjCSpaceAfterProperty: false</span><br><span class="line">ObjCSpaceBeforeProtocolList: true</span><br><span class="line">PenaltyBreakAssignment: 2</span><br><span class="line">PenaltyBreakBeforeFirstCallParameter: 1</span><br><span class="line">PenaltyBreakComment: 300</span><br><span class="line">PenaltyBreakFirstLessLess: 120</span><br><span class="line">PenaltyBreakString: 1000</span><br><span class="line">PenaltyBreakTemplateDeclaration: 10</span><br><span class="line">PenaltyExcessCharacter: 1000000</span><br><span class="line">PenaltyReturnTypeOnItsOwnLine: 200</span><br><span class="line">PointerAlignment: Right</span><br><span class="line">RawStringFormats:</span><br><span class="line">  - Language: Cpp</span><br><span class="line">    Delimiters:</span><br><span class="line">      - cc</span><br><span class="line">      - CC</span><br><span class="line">      - cpp</span><br><span class="line">      - Cpp</span><br><span class="line">      - CPP</span><br><span class="line">      - &quot;c++&quot;</span><br><span class="line">      - &quot;C++&quot;</span><br><span class="line">    CanonicalDelimiter: &quot;&quot;</span><br><span class="line">    BasedOnStyle: google</span><br><span class="line">  - Language: TextProto</span><br><span class="line">    Delimiters:</span><br><span class="line">      - pb</span><br><span class="line">      - PB</span><br><span class="line">      - proto</span><br><span class="line">      - PROTO</span><br><span class="line">    EnclosingFunctions:</span><br><span class="line">      - EqualsProto</span><br><span class="line">      - EquivToProto</span><br><span class="line">      - PARSE_PARTIAL_TEXT_PROTO</span><br><span class="line">      - PARSE_TEST_PROTO</span><br><span class="line">      - PARSE_TEXT_PROTO</span><br><span class="line">      - ParseTextOrDie</span><br><span class="line">      - ParseTextProtoOrDie</span><br><span class="line">    CanonicalDelimiter: &quot;&quot;</span><br><span class="line">    BasedOnStyle: google</span><br><span class="line">ReflowComments: true</span><br><span class="line">SortIncludes: CaseInsensitive</span><br><span class="line">SortUsingDeclarations: false</span><br><span class="line">SpaceAfterCStyleCast: false</span><br><span class="line">SpaceAfterLogicalNot: false</span><br><span class="line">SpaceAfterTemplateKeyword: true</span><br><span class="line">SpaceBeforeAssignmentOperators: true</span><br><span class="line">SpaceBeforeCpp11BracedList: false</span><br><span class="line">SpaceBeforeCtorInitializerColon: true</span><br><span class="line">SpaceBeforeInheritanceColon: true</span><br><span class="line">SpaceBeforeParens: ControlStatements</span><br><span class="line">SpaceBeforeRangeBasedForLoopColon: true</span><br><span class="line">SpaceInEmptyBlock: false</span><br><span class="line">SpaceInEmptyParentheses: false</span><br><span class="line">SpacesBeforeTrailingComments: 3</span><br><span class="line">SpacesInAngles: false</span><br><span class="line">SpacesInConditionalStatement: false</span><br><span class="line">SpacesInContainerLiterals: false</span><br><span class="line">SpacesInCStyleCastParentheses: false</span><br><span class="line">SpacesInParentheses: false</span><br><span class="line">SpacesInSquareBrackets: false</span><br><span class="line">SpaceBeforeSquareBrackets: false</span><br><span class="line">Standard: Auto</span><br><span class="line">StatementMacros:</span><br><span class="line">  - Q_UNUSED</span><br><span class="line">  - QT_REQUIRE_VERSION</span><br><span class="line">TabWidth: 4</span><br></pre></td></tr></table></figure>

<h1 id="编译工具链设置"><a href="#编译工具链设置" class="headerlink" title="编译工具链设置"></a>编译工具链设置</h1><h2 id="编译工具链的添加与解释"><a href="#编译工具链的添加与解释" class="headerlink" title="编译工具链的添加与解释"></a>编译工具链的添加与解释</h2><p>这个配置是进行 C++ 开发的关键，因为这个编译工具链就意味着 C++ 的编译环境。</p>
<p>按下图点开对应的信息，如果你任何编译工具链都没有添加，由于新版本的 CLion 它会自带一个 mingw 的编译套件，所以默认会有一个 CLion 自带的 mingw 编译工具链，如下图所示我的编译工具链稍微有点丰富，有 msvc、g++、clang++、mingw，作为一个刚刚入门学编程的新手，我建议编译工具链这一块暂时就没必要了解了，但在 CLion 中编译的具体配置流程我认为还是有必要讲清楚。<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/blog/e2c771d0ded72e510ad702f4cb46fc6a_MD5.webp" alt="bianyi"></p>
<p>CLion 中添加编译工具链非常简单，你本机把对应工具链的路径加入到了环境变量，那么在你点击 <code>+</code> 对应编译链类型后，会自动扫描到，如果实在没有扫描到，那么也可以自己填入对应的路径，整个编译链包括：</p>
<ol>
<li><p>cmake，用于跨平台以及简化底层编译脚本的工具。</p>
</li>
<li><p>cmake 生成更底层的编译命令 (对应上述的 Build Tool)，比如 gmake 也就是解析. makefile 文件进行命令执行，比如 ninja 解析 .ninja 文件进行命令执行（编译速度比 makefile 更快，亲身体验）。</p>
</li>
<li><p>C 语言的编译器 (clang&#x2F;gcc&#x2F;cl 等等)。</p>
</li>
<li><p>C++ 的编译器 (clang++&#x2F;g++&#x2F;cl 等等)。</p>
</li>
</ol>
<p>如果是 mingw，那么上述的一套都是包含的，只需要把 Toolset 这个选项选择为 mingw 对应的目录即可，选择好后，CLion 会自动识别上述四件套的位置。</p>
<p>接下来简单介绍如何添加一些工具链：</p>
<ul>
<li>安装 msvc 编译工具链：直接到官网下载 VS2022，然后安装对应 C++ 环境，打开 CLion 后添加 msvc 环境时就会自动识别。官网：<a href="https://link.juejin.cn/?target=https://visualstudio.microsoft.com/zh-hans/vs/" title="https://visualstudio.microsoft.com/zh-hans/vs/">visualstudio.microsoft.com&#x2F;zh-hans&#x2F;vs&#x2F;</a></li>
</ul>
<p>其实对于我们 C++ 程序员而言，最需要的就是一个 Linux 环境，因为很多底层的系统调用是不在 C++ 标准之内的，C++ 想要做到跨平台很难，所以我们需要把开发环境切换到 Linux 系统，正好 windows 提供了 Linux 子系统，也就是 wsl，完美的解决了这个问题，不要考虑日常的使用和开发环境我们到底选哪个了，我全都要！</p>
<p>而 CLion 对 wsl 的适配程度和正常的本机开发几乎没有任何区别，我们只需要现在 Windows 上安装 wsl2 后，CLion 便可以自动识别你本机的 wsl 环境了，但是你有了 wsl，并不意味着你有了对应的编译链，之前说了，编译链是包括四个东西的，你需要一一手动再 wsl 上先安装好，CLion 会自动识别到的，如果识别不到，由于是通过 <code>apt install</code> 命令安装的，大家应该都清楚在具体那个目录下，实在不清楚可以使用 <code>which</code> 命令。</p>
<ul>
<li>安装 wsl2：其实 wsl2 的安装已经被简化到了极致，在 powershell 中 <code>wsl --install</code> 即可。 具体的官方文档如下 <a href="https://link.juejin.cn/?target=https://learn.microsoft.com/zh-cn/windows/wsl/install" title="https://learn.microsoft.com/zh-cn/windows/wsl/install">learn.microsoft.com&#x2F;zh-cn&#x2F;windo…</a> ，一篇非常简练的博客教程：<a href="https://link.juejin.cn/?target=https://zhuanlan.zhihu.com/p/438255467" title="https://zhuanlan.zhihu.com/p/438255467">zhuanlan.zhihu.com&#x2F;p&#x2F;438255467</a>，如果安装遇到问题（大概率网络问题），请自行谷歌或百度或 bing 或 chatgpt。</li>
<li>如果需要使用 CLion 进行 Qt 开发，可以查看视频讲解：<a href="https://link.juejin.cn/?target=https://www.bilibili.com/video/BV18q4y1i7kV/" title="https://www.bilibili.com/video/BV18q4y1i7kV/">www.bilibili.com/video/BV18q…</a> ，对应的配置信息：<a href="https://link.juejin.cn/?target=https://gitee.com/yuexingqin/template_qtclion" title="https://gitee.com/yuexingqin/template_qtclion">gitee.com&#x2F;yuexingqin&#x2F;…</a></li>
<li>如果需要使用 CLion 进行 STM32 开发，那么可以查看稚晖君在知乎写的博客教程：<a href="https://link.juejin.cn/?target=https://zhuanlan.zhihu.com/p/145801160" title="https://zhuanlan.zhihu.com/p/145801160">zhuanlan.zhihu.com&#x2F;p&#x2F;145801160</a></li>
</ul>
<h2 id="cmake-配置项的添加与解释"><a href="#cmake-配置项的添加与解释" class="headerlink" title="cmake 配置项的添加与解释"></a>cmake 配置项的添加与解释</h2><p>解释完上述编译链后，我们发现 CLion 中有个很明显的 <code>default</code> 字眼，这个有什么用呢？</p>
<p>如果排在第一个的编译链，会被设置为默认编译链，如果想要其他的编译链为默认，点击上移即可。</p>
<p>至于具体的作用，别急，先等我讲完 CLion 中 cmake 配置项的处理。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/blog/be20d186f43d21e980bb5a66c92d58bd_MD5.webp" alt="clion1"></p>
<p>如上图所示，第二个 <code>CMake</code> 选项就是我们现在要讲的东西，而这两个正好也是整个开发环境中最重要的东西，第一个编译工具链决定了 CLion 中已经识别了本机有哪些编译环境，而第二个 <code>CMake</code> 选项，则是用于配置 cmake 基于哪些配置项生成。</p>
<p>所以我们现在应该了解了 CLion 是如何去编译项目生成可执行文件的了。</p>
<ol>
<li><p>通过 cmake 配置选项运行整个项目的 CMakeList.txt</p>
</li>
<li><p>生成 makefile 或其他底层脚本后再通过对应的工具去执行这个脚本</p>
</li>
<li><p>运行编译好的程序</p>
</li>
</ol>
<p>而我们现在讲的就是添加 cmake 配置选项，如果你手动敲 cmake 命令的话，那样对应的就是命令行参数了。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/blog/e8cae55de729fc524cfc69218e494ab9_MD5.webp" alt="clion3"></p>
<p>上述图片中已经解释了一些配置的作用。这些配置项一般是不常改动，使用默认值就行，比如 <code>Build options</code> 是执行最后的脚本所用的参数，默认为 <code>-j 12</code>，比如如果是 makefile，那么就是 <code>make -j12</code>。</p>
<p>下面是大家可能需要进行一些配置的选项：</p>
<ol>
<li><p>Build type：这是程序最终编译的类型，意味着编译器该以何种程度对源代码进行优化，比如 Debug 版本一般再 gcc 中对应 o2 的优化，release 版本对应 o3 的优化，两者一般存在 10 倍左右的性能差距。</p>
</li>
<li><p>Toolchain：这是前面所说的编译工具链，一般来说，想要切换编译器，你切换这个选项就行了，默认使用 default 工具链。</p>
</li>
<li><p>Generator：这是前面所说的工具链中的较为底层的脚本的运行工具，可以是 makefile 或者 ninja，不选的话也是默认工具链里的那个。</p>
</li>
<li><p>CMake options：这个是 cmake 运行时可以加入的命令行参数，比如我们可以 -D 来定义对应的变量控制对应的 cmake 行为，甚至于前面的 Build type 我们完全可以不写（当然这是 CLion，这个空必须得被填充），然后使用 -DCMAKE_BUILD_TYPE&#x3D;Release，这个变量可以决定最终 cmake 生成的执行脚本是按照 release 的标准去运行的，又比如 -DBUILD_SHARED_LIBS&#x3D;ON，那么最终是会生成动态库而不是静态库，我上图中的 -DENABLE_TEST&#x3D;ON 是内部的 cmake 有定义一个变量默认为 OFF 值，如果为 ON 时会加入测试代码为子项目。</p>
</li>
</ol>
<p>现在 cmake 在 CLion 中的配置项已经讲完了，简单实践一下来体验之前讲的 CLion 到整个运行的流程，我这里就直接配图了：</p>
<ol>
<li><p>通过 cmake 配置选项运行整个项目的 CMakeList.txt。<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/blog/4a465ad3b52d1bff6147583d7661fc75_MD5.webp" alt="clion4"></p>
</li>
<li><p>生成 makefile 或其他底层脚本后再通过对应的工具去执行这个脚本。我们先看一眼上一步 cmake 生成的文件（放出了两个不同的配置项产生的脚本，第一个使用的 Generator 为 ninja，第二个使用的为 gmake）：<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/blog/ab4d9f999e9c03e883f62955143b8f7c_MD5.webp" alt="clion5"> 如果想要继续执行这个脚本，应该在 CLion 中执行对应的源代码，CLion 会自动识别入口点函数，然后给出可执行的按钮，如图：<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/blog/de8e460363e1c84849bf05e20d615f9e_MD5.webp" alt="clion6"> 点击执行后，不仅会直接对应的 makefile 或 build. ninja 还会顺便把这个程序运行到 CLion 内置的终端环境中。</p>
</li>
<li><p>运行编译好的程序：这一步已经在第二步一并执行了。</p>
</li>
</ol>
<p>理解了这三步以及 cmake 的配置之后，我相信如果突然间 CLion 不出现执行程序的按钮，或者一个外部的项目我们无法跑起来，那么我们肯定是会有对应的排查思路了。比如没有执行程序的按钮，那可能对应的 cmake 配置项你还没设置好，如果外部项目跑不起来，你可以把那四个编译工具链中的某个换其他的环境试试？</p>
<h1 id="cmake-的使用与实战"><a href="#cmake-的使用与实战" class="headerlink" title="cmake 的使用与实战"></a>cmake 的使用与实战</h1><p>经过上述文字和图片讲解，我们很自然的想到，整个 CLion 运行 C++ 代码其实就是在运行 cmake 和 makefile(或 build.ninja)，第二个过程我们参与不了，但是第一个 cmake 的编写过程我们却需要一直接触。</p>
<p>下面用 CLion 新建项目自动生成的 cmake 模板来简单对 cmake 语法热热身。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cmake_minimum_required(VERSION 3.22)</span><br><span class="line">project(untitled)</span><br><span class="line"></span><br><span class="line">set(CMAKE_CXX_STANDARD 17)</span><br><span class="line"></span><br><span class="line">add_executable(untitled main.cpp)</span><br></pre></td></tr></table></figure>

<ul>
<li><code>cmake_minimum_required</code> 命令：规定了编译本项目的 cmake 工具至少需要 3.22 版本。</li>
<li><code>project</code> 命令：规定了本项目的项目名称，同时也根据这个传入的值生成了一堆变量，常用的如下：</li>
</ul>
<ol>
<li><p><code>PROJECT_NAME</code> ：项目名称</p>
</li>
<li><p><code>PROJECT_BINARY_DIR</code> ：项目的二进制文件目录，即编译后的可执行文件和库文件的输出目录</p>
</li>
<li><p><code>PROJECT_SOURCE_DIR</code> ：项目的源文件目录，即包含 CMakeLists.txt 文件的目录</p>
</li>
</ol>
<p>举个简单例子说明上述变量的作用： 比如一个测试的子项目中的 CMakeList.txt，可能需要写下面的语句（先不管 file 命令），由于是作为直接的子项目，那么里面肯定不会存在 project 语句，所以 PROJECT_SOURCE_DIR 变量表示的仍然是整个项目的根目录，直接通过 <code>$&#123;&#125;</code> 的形式来使用它即可，这样就不需要关心相对或绝对路径了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">file(GLOB SONIC_TEST_FILES</span><br><span class="line">     &quot;$&#123;PROJECT_SOURCE_DIR&#125;/tests/*.h&quot;</span><br><span class="line">     &quot;$&#123;PROJECT_SOURCE_DIR&#125;/tests/*.cpp&quot;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ul>
<li><code>set</code> 命令：设置对应变量为对应的值，该变量存在，则修改该变量的值，如果不存在则会创建并初始化为对应的值，这里对 set 的使用是设置了 CMAKE_CXX_STANDARD 变量为 17，这个变量可以控制最终编译采用的 C++ 版本，这里是使用 C++17。</li>
<li><code>add_executable</code> 命令：这是用于生成可执行程序的命令，第一个参数为该执行程序最终编译后生成的文件名，后面跟着的都是需要编译的源代码。</li>
</ul>
<p>对于新手而言，其实不太需要自己手写 cmake，因为 CLion 会在你新建源文件的时候把相应源文件添加到 add_excutable 命令的后面，但项目稍微大一点或者说引入了很多外部库，那么大概率会抛弃 CLion 的这种自动化了。</p>
<h2 id="常用的-cmake-变量（入门）"><a href="#常用的-cmake-变量（入门）" class="headerlink" title="常用的 cmake 变量（入门）"></a>常用的 cmake 变量（入门）</h2><p>下面只列出了部分变量的作用，更多的变量请查看文档：<a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/manual/cmake-variables.7.html" title="https://cmake.org/cmake/help/latest/manual/cmake-variables.7.html">cmake.org&#x2F;cmake&#x2F;help&#x2F;…</a></p>
<ul>
<li><code>PROJECT_NAME</code> ：项目名称</li>
<li><code>PROJECT_BINARY_DIR</code> ：项目的二进制文件目录，即编译后的可执行文件和库文件的输出目录</li>
<li><code>PROJECT_SOURCE_DIR</code> ：项目的源文件目录，即包含 CMakeLists.txt 文件的目录</li>
<li><code>CMAKE_BINARY_DIR</code> ：当前 CMake 运行的二进制文件目录，通常和 PROJECT_BINARY_DIR 是同一个目录</li>
<li><code>CMAKE_SOURCE_DIR</code> ：当前 CMake 运行的源文件目录，通常和 PROJECT_SOURCE_DIR 是同一个目录</li>
<li><code>CMAKE_C_STANDARD</code> ：指定 C 语言的标准版本</li>
<li><code>CMAKE_CXX_STANDARD</code> ：指定 C++ 语言的标准版本</li>
<li><code>CMAKE_CXX_FLAGS</code> ：指定编译 C++ 代码时使用的编译选项</li>
<li><code>CMAKE_C_FLAGS</code> ：指定编译 C 代码时使用的编译选项</li>
<li><code>CMAKE_EXE_LINKER_FLAGS</code> ：指定链接可执行文件时使用的链接选项</li>
<li><code>CMAKE_SYSTEM_NAME</code> ：指定当前操作系统名称（如 Windows、Linux 等）</li>
<li><code>CMAKE_SYSTEM_PROCESSOR</code> ：指定当前处理器的类型（如 x86、x86_64 等）</li>
<li><code>CMAKE_CXX_COMPILER_ID</code> ：指定了当前使用的 C++ 编译器，同理可得 C 的编译器对应的名字。</li>
</ul>
<p>对这些变量做一个简单的实践：</p>
<ol>
<li>通过 message 打印出 PROJECT_BINARY_DIR、PROJECT_SOURCE_DIR、CMAKE_BINARY_DIR、CMAKE_SOURCE_DIR 来加以验证。 目录结构：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">  ├── CMakeLists.txt</span><br><span class="line">  ├── main.cpp</span><br><span class="line">  └── sub</span><br><span class="line">      └── CMakeLists.txt</span><br></pre></td></tr></table></figure>

<p>cmake:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">main:</span><br><span class="line">    cmake_minimum_required(VERSION 3.14)</span><br><span class="line">    project(main)</span><br><span class="line">    </span><br><span class="line">    add_subdirectory(sub)</span><br><span class="line">    </span><br><span class="line">    message(STATUS &quot;main:$&#123;PROJECT_NAME&#125;\n  pro-src:$&#123;PROJECT_SOURCE_DIR&#125;\n pro-bin:$&#123;PROJECT_BINARY_DIR&#125;\n cmake-src:$&#123;CMAKE_SOURCE_DIR&#125;\n cmake-bin:$&#123;CMAKE_BINARY_DIR&#125;&quot;)</span><br><span class="line">    </span><br><span class="line">    sub:</span><br><span class="line">    project(sub)</span><br><span class="line">    </span><br><span class="line">    message(STATUS &quot;sub:$&#123;PROJECT_NAME&#125;\n  pro-src:$&#123;PROJECT_SOURCE_DIR&#125;\n pro-bin:$&#123;PROJECT_BINARY_DIR&#125;\n cmake-src:$&#123;CMAKE_SOURCE_DIR&#125;\n cmake-bin:$&#123;CMAKE_BINARY_DIR&#125;&quot;)</span><br></pre></td></tr></table></figure>

<p>打印信息如下：我们发现 CMake 对应的变量没有变化，而 Prject 有了变量，因为我们在 sub 也使用了 project 命令。<br>        <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/blog/ab5b458791433d39b9dff10131e59101_MD5.webp" alt="clion7"></p>
<ol>
<li>通过变量检测环境执行不同的 cmake 代码：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#判断当前的操作系统</span><br><span class="line">if (CMAKE_SYSTEM_NAME MATCHES &quot;Linux&quot;)</span><br><span class="line">    target_link_libraries(my-logger PUBLIC fmt-header-only pthread)</span><br><span class="line">    message(STATUS &quot;Now is Linux&quot;)</span><br><span class="line">elseif (CMAKE_SYSTEM_NAME MATCHES &quot;Windows&quot;)</span><br><span class="line">    target_link_libraries(my-logger PUBLIC fmt-header-only ws2_32)</span><br><span class="line">    message(STATUS &quot;Now is windows&quot;)</span><br><span class="line">endif ()</span><br><span class="line">#判断当前使用的编译器</span><br><span class="line">if (CMAKE_CXX_COMPILER_ID STREQUAL &quot;GNU&quot;)</span><br><span class="line">  # Do something for GCC</span><br><span class="line">elseif (CMAKE_CXX_COMPILER_ID STREQUAL &quot;Intel&quot;)</span><br><span class="line">  # Do something for Intel C++</span><br><span class="line">elseif (CMAKE_CXX_COMPILER_ID STREQUAL &quot;Microsoft&quot;)</span><br><span class="line">  # Do something for Microsoft Visual C++</span><br><span class="line">elseif (CMAKE_CXX_COMPILER_ID STREQUAL &quot;Clang&quot;)</span><br><span class="line">  # Do something for Clang</span><br><span class="line">endif()</span><br><span class="line"></span><br><span class="line">#判断当前的系统架构</span><br><span class="line">if (CMAKE_SYSTEM_PROCESSOR MATCHES &quot;i|x86|x86_64|AMD64&quot;)</span><br><span class="line">  # Do something for x86 architecture</span><br><span class="line">elseif (CMAKE_SYSTEM_PROCESSOR MATCHES &quot;^(arm|aarch64)&quot;)</span><br><span class="line">  # Do something for ARM architecture</span><br><span class="line">elseif (CMAKE_SYSTEM_PROCESSOR MATCHES &quot;^(mips|mipsel|mips64)&quot;)</span><br><span class="line">  # Do something for MIPS architecture</span><br><span class="line">elseif (CMAKE_SYSTEM_PROCESSOR MATCHES &quot;^(powerpc|ppc64)&quot;)</span><br><span class="line">  # Do something for PowerPC architecture</span><br><span class="line">endif()</span><br></pre></td></tr></table></figure>

<ol>
<li>通过调整链接时的 flag 防止动态链接，因为如果你是使用 Windows 平台下的编译工具链，CLion 有些时候最终链接并不是采用静态链接，导致你最终生成的可执行程序没法直接执行，这个时候你就需要使用下面的命令来强制静态链接了：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set(CMAKE_EXE_LINKER_FLAGS &quot;-static&quot;)</span><br></pre></td></tr></table></figure>

<h2 id="常用的-cmake-命令（入门）"><a href="#常用的-cmake-命令（入门）" class="headerlink" title="常用的 cmake 命令（入门）"></a>常用的 cmake 命令（入门）</h2><p>下列只列出了部分命令，如果你以后有需要用到的其他命令，请前往官网进行查询：<a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/manual/cmake-commands.7.html" title="https://cmake.org/cmake/help/latest/manual/cmake-commands.7.html">cmake.org&#x2F;cmake&#x2F;help&#x2F;…</a></p>
<p>我个人较为常用的命令：</p>
<ol>
<li><p><a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/command/project.html" title="https://cmake.org/cmake/help/latest/command/project.html">project</a>：用于定义项目名称、版本号和语言。</p>
</li>
<li><p><a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/command/add_executable.html" title="https://cmake.org/cmake/help/latest/command/add_executable.html">add_executable</a>：用于添加可执行文件。第一个参数很重要，被称为 target，可以作为 target_xxx 命令的接收对象。</p>
</li>
<li><p><a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/command/add_library.html" title="https://cmake.org/cmake/help/latest/command/add_library.html">add_library</a>：用于添加库文件，可以创建静态库或动态库。第一个参数很重要，被称为 target，可以作为 target_xxx 命令的接收对象。简单使用如下</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">add_library(test_lib a.cc b.cc) #默认生成静态库  </span><br><span class="line">add_library(test_lib SHARED a.cc b.cc) #默认生成静态库</span><br></pre></td></tr></table></figure>

<ol>
<li><p><a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/command/add_definitions.html" title="https://cmake.org/cmake/help/latest/command/add_definitions.html">add_definitions</a>：用于添加宏定义，注意该命令没有执行顺序的问题，只要改项目中用了该命令定义宏，那么所有的源代码都会被定义这个宏 <code>add_definitions(-DFOO -DBAR …)</code> 。</p>
</li>
<li><p><a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/command/add_subdirectory.html" title="https://cmake.org/cmake/help/latest/command/add_subdirectory.html">add_subdirectory</a>：用于添加子项目目录，如果有该条语句，就先会跑去执行子项目的 cmake 代码，这样会导致一些需要执行后立马生效的语句作用不到，比如 include_directories 和 link_directories 如果执行在这条语句后面，则他们添加的目录在子项目中无法生效。有些命令如 target_include_directories 和 target_link_directories 是根据目标 target 是否被链接使用来生效的，所以这些命令的作用范围与执行顺序无关，且恰好同一个 cmake 项目中产生的库文件是可以直接通过名称链接的，无论链接对象是在子目录还是父目录</p>
</li>
<li><p><a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/command/target_link_libraries.html" title="https://cmake.org/cmake/help/latest/command/target_link_libraries.html">target_link_libraries</a>：用于将可执行文件或库文件链接到库文件或可执行文件。身为 target_xxx 的一员，很明显第二个参数也可以进行权限控制。</p>
</li>
<li><p><a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/command/include_directories.html" title="https://cmake.org/cmake/help/latest/command/include_directories.html">include_directories</a>：用于指定头文件搜索路径，优点是简单直接，缺点是无法进行权限控制，一旦被执行后，后续的所有代码都能搜索到对应的文件路径。</p>
</li>
<li><p><a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/command/target_include_directories.html" title="https://cmake.org/cmake/help/latest/command/target_include_directories.html">target_include_directories</a>：指定头文件搜索路径，并将搜索路径关联到一个 target 上，这里的 target 一般是指生成可执行程序命令里的 target 或者生成库文件的 target，与上一个命令的不同点在于可以设置导出权限，比如现在我写了一个项目，这个项目引入了其他库，但是我不想让其他库的符号暴露出去（毕竟使用这个项目的人只关注这个项目的接口，不需要关注其他依赖的接口）可以通过 PRIVATE 将头文件搜索目录设置不导出的权限。</p>
</li>
<li><p><a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/command/link_directories.html" title="https://cmake.org/cmake/help/latest/command/link_directories.html">link_directories</a>：与前面的 include_directories 命令类似，添加的是库的搜索路径。</p>
</li>
<li><p><a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/command/target_link_directories.html" title="https://cmake.org/cmake/help/latest/command/target_link_directories.html">target_link_directories</a>：和前面的 include 版本一样的，只是改成了库路径。</p>
</li>
<li><p>if\elseif\endif ，在编程语言立马已经用烂了，现在主要是了解 if(condition) 中的条件到底如何判断的，以及内部都支持哪些操作，比如大于等于啥的，这方面直接看官方文档吧，非常好懂：<a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/command/if.html" title="https://cmake.org/cmake/help/latest/command/if.html">cmake.org&#x2F;cmake&#x2F;help&#x2F;…</a></p>
</li>
<li><p><a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/command/aux_source_directory.html" title="https://cmake.org/cmake/help/latest/command/aux_source_directory.html">aux_source_directory</a>：这个指令简单实用，第一个参数传递一个文件目录，它会扫描这里面所有的源文件放到第二个参数定义的变量名中。注意第一个参数只能是文件夹。</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aux_source_directory($&#123;PROJECT_SOURCE_DIR&#125; SRC)</span><br></pre></td></tr></table></figure>

<ol>
<li><a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/command/file.html" title="https://cmake.org/cmake/help/latest/command/file.html">file</a>：可以说是上面那个命令的增强版本，但如果熟悉这个命令的朋友肯定很快站出来反对，因为这个命令实在是太强大了，你如果翻一翻这个官方文档就会发现它具备几乎文件系统的所有功能，什么读写文件啊，什么从网上下载文件，本地上传文件之类的它都有，计算文件的相对路径，路径转化等等。但我们平时用到的最多的命令还是用来获取文件到变量里。比如 file(GLOB FILES “ 文件路径表示 1” “ 文件路径表示 2” …) GLOB 会产生一个由所有匹配 globbing 表达式的文件组成的列表，并将其保存到第二个参数定义的变量中。Globbing 表达式与正则表达式类似，但更简单，比如如果要实现前一个命令的功能可以这么写：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file(GLOB SRC &quot;$&#123;PROJECT_SOURCE_DIR&#125;/*.cc&quot;)</span><br></pre></td></tr></table></figure>

<p>如果 GLOB 换成 GLOB_RECURSE ，那么上述命令将递归的搜寻其子目录的所有符合条件的文件，而不仅仅是一个层级。</p>
<ol>
<li><a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/command/execute_process.html" title="https://cmake.org/cmake/help/latest/command/execute_process.html">execute_process</a>：用于执行外部的命令，如下的示例代码是执行 git clone 命令，执行命令的工作目录在 <code>$&#123;CMAKE_BINARY_DIR&#125;/deps/</code></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">execute_process(COMMAND git clone https://github.com/&lt;username&gt;/&lt;repository&gt;.git</span><br><span class="line">                WORKING_DIRECTORY $&#123;CMAKE_BINARY_DIR&#125;/deps/&lt;repository&gt;)</span><br></pre></td></tr></table></figure>

<ol>
<li><p><a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/command/message.html" title="https://cmake.org/cmake/help/latest/command/message.html">message</a>：打印出信息用于 debug。</p>
</li>
<li><p><a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/command/option.html" title="https://cmake.org/cmake/help/latest/command/option.html">option</a>：用于快速设置定义变量并赋值为对应的 bool 值，常被用于判断某些操作是否执行。</p>
</li>
<li><p><a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/command/find_package.html%23id5" title="https://cmake.org/cmake/help/latest/command/find_package.html#id5">find_package</a>：用于查找外界的 package，其实就是查找外界对应的 <code>&lt;package&gt;Config.cmake</code> 和 <code>Find&lt;package&gt;.cmake</code> 文件，这些文件里有外界包对应的变量信息以及库和头文件的各种路径信息。我们需要注意一些有关 <code>find_package</code> 命令查找 Config.cmake 路径的变量：</p>
</li>
</ol>
<ul>
<li><code>CMAKE_PREFIX_PATH</code> 变量是一个路径列表，CMake 会在这些路径中搜索包的 <code>Config.cmake</code> 文件。</li>
<li><code>&lt;Package&gt;_DIR</code> 变量是指向包的 <code>Config.cmake</code> 文件的路径。如果你手动设置了这个变量，那么 <code>find_package</code> 命令就可以找到包的信息。</li>
</ul>
<p>同时他的一些常用参数如下：</p>
<ul>
<li><code>CONFIG</code> ：显式指定 find_package 去查找 <code>&lt;package&gt;Config.cmake</code> 文件，一般只要你在变量里面指定了 <code>&lt;package&gt;Config.cmake</code> 的路径，那么该参数填不填都没差别。我建议最好还是带上该参数比较好。</li>
<li><code>REQUIRED</code> ：该参数表示如果没找到，那么直接产生 cmake 错误，退出 cmake 执行过程，如果没有 REQUIRED，则即使没找到也不会终止编译。</li>
<li><code>PATHS</code> ：这个参数的效果和前面的变量类似，也是指定查找的路径。</li>
<li><code>COMPONENTS</code> ：用于指定查找的模块，模块分离在不同的文件中，需要使用哪个就指定哪个模块。典型的就是使用 Qt 时的 cmake 代码，比如 <code>find_package(Qt5 COMPONENT Core Gui Widgets REQUIRED)</code> 。</li>
<li>VERSION：可能有很多个不同版本的包，则需要通过该参数来指定，如：<code>find_package(XXX VERSION 1.2.3)</code>。</li>
</ul>
<ol>
<li><a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/command/include.html" title="https://cmake.org/cmake/help/latest/command/include.html">include</a>：从文件或模块加载并运行 CMake 代码。我用这个命令实际上只是为了使用 <a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/module/FetchContent.html%23id1" title="https://cmake.org/cmake/help/latest/module/FetchContent.html#id1">FetchContent</a><a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/module/FetchContent.html%23fetchcontent" title="https://cmake.org/cmake/help/latest/module/FetchContent.html#fetchcontent">¶</a> 这个 module 的功能，该功能是从 cmake3.11 开始支持的，使用该 module 前需要通过 include 命令加载该模块，命令如下：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">include(FetchContent)</span><br></pre></td></tr></table></figure>

<ol>
<li><a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/module/FetchContent.html%23id1" title="https://cmake.org/cmake/help/latest/module/FetchContent.html#id1">FetchContent</a>：这是一个模块功能，它用来从代码仓库中拉取代码，例如我要把最近写的日志库引入到当前的项目中使用（注意这中间不会有任何代理，所以拉取 GitHub 的仓库可能失败）：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">include(FetchContent)#引入功能模块</span><br><span class="line"></span><br><span class="line">FetchContent_Declare(</span><br><span class="line">        my-logger  		 #项目名称</span><br><span class="line">        GIT_REPOSITORY https://github.com/ACking-you/my-logger.git #仓库地址</span><br><span class="line">        GIT_TAG        v1.6.2  #仓库的版本tag</span><br><span class="line">        GIT_SHALLOW TRUE    #是否只拉取最新的记录</span><br><span class="line">)</span><br><span class="line">FetchContent_MakeAvailable(my-logger)</span><br><span class="line"></span><br><span class="line">add_excutable(main $&#123;SRC&#125;)</span><br><span class="line">#链接到程序进行使用</span><br><span class="line">target_link_libraries(main my-logger)</span><br></pre></td></tr></table></figure>

<p>这样引入第三方库的好处显而易见，优点类似于包管理的效果了，但缺少了最关键的中心仓库来确保资源的有效和稳定。参考 golang 再做个 proxy 层级就好了。 同样可以拉取最新的 googletest 可以使用下列语句：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">FetchContent_Declare(</span><br><span class="line">        googletest</span><br><span class="line">        GIT_REPOSITORY https://github.com/google/googletest.git</span><br><span class="line">        GIT_TAG        release-1.12.1</span><br><span class="line">        GIT_SHALLOW TRUE</span><br><span class="line">)</span><br><span class="line"># For Windows: Prevent overriding the parent project&#x27;s compiler/linker settings</span><br><span class="line">set(gtest_force_shared_crt ON CACHE BOOL &quot;&quot; FORCE)</span><br><span class="line">FetchContent_MakeAvailable(googletest)</span><br><span class="line"></span><br><span class="line">target_link_libraries(main gtest_main)</span><br></pre></td></tr></table></figure>

<ol>
<li><a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/command/function.html" title="https://cmake.org/cmake/help/latest/command/function.html">function&#x2F;endfunction</a> ：在 cmake 中用于定义函数，复用 cmake 代码的命令。第一个参数为函数的名称，后面为参数的名称，使用参数和使用变量时一样的，但是如果参数是列表类型，则在传入的时候就会被展开，然后与函数参数依次对应，多余的参数被 <code>ARGN</code> 参数吸收。</li>
</ol>
<p>更多较为常用的命令：</p>
<ul>
<li><a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/command/add_custom_command.html" title="https://cmake.org/cmake/help/latest/command/add_custom_command.html">add_custom_command</a>：添加自定义规则命令，同样也是执行外界命令，但多了根据依赖和产物判断执行时机的作用。</li>
<li><a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/command/install.html" title="https://cmake.org/cmake/help/latest/command/install.html">install</a>：添加 install 操作。</li>
<li><a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/command/string.html" title="https://cmake.org/cmake/help/latest/command/string.html">string</a>：对 string 的所有操作，比如字符串替换啥的。</li>
<li><a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/command/list.html" title="https://cmake.org/cmake/help/latest/command/list.html">list</a>：对 list 的所有操作，比如列表处理之类的。</li>
<li><a href="https://link.juejin.cn/?target=https://cmake.org/cmake/help/latest/command/foreach.html" title="https://cmake.org/cmake/help/latest/command/foreach.html">foreach</a>：cmake 中的 for 循环。</li>
<li>…</li>
</ul>
<p>利用上述命令实现 Qt 开发中调用 uic 工具把 大量的 <code>.ui</code> 文件转化为 <code>.cpp</code> 和 <code>.h</code> 文件，并实现当 ui 文件更新时或 <code>.cpp/.h</code> 文件不存在时才创建对应的 <code>.cpp/.h</code> 文件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">#函数功能实现</span><br><span class="line">function(get_ui_source)</span><br><span class="line">		foreach (item $&#123;ARGN&#125;)</span><br><span class="line">				set(UIC_EXE_PATH $&#123;VCPKG_ROOT&#125;/installed/x64-windows/tools/qt5/bin/uic.exe)</span><br><span class="line">				get_filename_component(name $&#123;item&#125; NAME_WLE)</span><br><span class="line">				string(PREPEND name &quot;ui_&quot;)</span><br><span class="line">				set(output_h $&#123;PROJECT_SOURCE_DIR&#125;/ui_gen/$&#123;name&#125;.h)</span><br><span class="line">				set(output_cpp $&#123;PROJECT_SOURCE_DIR&#125;/ui_gen/$&#123;name&#125;.cpp)</span><br><span class="line">				file(TIMESTAMP $&#123;item&#125; ui_time)</span><br><span class="line">				#当.h 文件已经存在时，仅当.ui 文件被更新了才重新生成.h 文件</span><br><span class="line">				if (EXISTS $&#123;output_h&#125;)</span><br><span class="line">						file(TIMESTAMP $&#123;output_h&#125; h_time)</span><br><span class="line">						if (ui_time GREATER h_time)</span><br><span class="line">								execute_process(COMMAND $&#123;UIC_EXE_PATH&#125; $&#123;item&#125; -o $&#123;output_h&#125;)</span><br><span class="line">						endif ()</span><br><span class="line">				else ()</span><br><span class="line">						execute_process(COMMAND $&#123;UIC_EXE_PATH&#125; $&#123;item&#125; -o $&#123;output_h&#125;)</span><br><span class="line">				endif ()</span><br><span class="line">				#当.cpp 文件已经存在时，仅当.ui 文件被更新了才重新生成.cpp 文件</span><br><span class="line">				if (EXISTS $&#123;output_cpp&#125;)</span><br><span class="line">						file(TIMESTAMP $&#123;output_cpp&#125; cpp_time)</span><br><span class="line">						if (ui_time GREATER cpp_time)</span><br><span class="line">								execute_process(COMMAND $&#123;UIC_EXE_PATH&#125; $&#123;item&#125; -o $&#123;output_cpp&#125;)</span><br><span class="line">						endif ()</span><br><span class="line">				else ()</span><br><span class="line">						execute_process(COMMAND $&#123;UIC_EXE_PATH&#125; $&#123;item&#125; -o $&#123;output_cpp&#125;)</span><br><span class="line">				endif ()</span><br><span class="line">		endforeach ()</span><br><span class="line">endfunction()</span><br><span class="line"></span><br><span class="line">get_ui_source($&#123;UI_FILES&#125;) #功能的使用</span><br></pre></td></tr></table></figure>

<h1 id="ideaVim-的使用与设置"><a href="#ideaVim-的使用与设置" class="headerlink" title="ideaVim 的使用与设置"></a>ideaVim 的使用与设置</h1><p>关于 vim 的基本操作，这里就不细讲，网络上大把大把的教程，我这里只讲在 CLion 中怎么使用 vim，怎么配置 vim 让它在 CLion 中更好用。</p>
<p>在使用 ideaVim 前，我们需要先下载 IdeaVim 这个拓展，ideaVim 的链接：<a href="https://link.juejin.cn/?target=https://plugins.jetbrains.com/plugin/164-ideavim" title="https://plugins.jetbrains.com/plugin/164-ideavim">plugins.jetbrains.com&#x2F;plugin&#x2F;164-…</a>，下载好后，应该是默认启用了的。</p>
<p>一、配置 ctrl+c 和 ctrl+v 和 ctrl+a 防止这些你常用的快捷键被 vim 占用</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/blog/ea65ef8d63700932304f37cd6a03b3ce_MD5.webp" alt="clion8"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/blog/9b6f9bdd71f86623aa79f719cd9bb29c_MD5.webp" alt="clion8"></p>
<p>二、配置.ideavimrc。</p>
<p>点击 <code>Open ~/.ideavimrc</code> 后，加入下面的配置（这是我个人使用的配置）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">let mapleader = &quot;,&quot;</span><br><span class="line">let g:mapleader = &quot;,&quot;</span><br><span class="line">set timeoutlen=300</span><br><span class="line"></span><br><span class="line">&quot; general</span><br><span class="line">imap jk &lt;Esc&gt;</span><br><span class="line">imap kj &lt;Esc&gt;</span><br><span class="line">vnoremap q &lt;Esc&gt;</span><br><span class="line">nmap &lt;C-o&gt; :action Back&lt;CR&gt;</span><br><span class="line">nmap &lt;C-i&gt; :action Forward&lt;CR&gt;</span><br><span class="line">nnoremap &lt;Leader&gt;r :&lt;C-u&gt;action RenameElement&lt;CR&gt;</span><br><span class="line"></span><br><span class="line">&quot; Redo</span><br><span class="line">nnoremap U &lt;C-r&gt;</span><br><span class="line"></span><br><span class="line">&quot; code editing</span><br><span class="line">nnoremap == :&lt;C-u&gt;action ReformatCode&lt;CR&gt;</span><br><span class="line">vnoremap == :&lt;C-u&gt;action ReformatCode&lt;CR&gt;</span><br><span class="line">nnoremap cc :&lt;C-u&gt;action CommentByLineComment&lt;CR&gt;</span><br><span class="line">vnoremap cc :&lt;C-u&gt;action CommentByLineComment&lt;CR&gt;</span><br><span class="line"></span><br><span class="line">&quot; Run and debug</span><br><span class="line">nnoremap \r :action RunClass&lt;cr&gt;</span><br><span class="line">nnoremap \i :&lt;C-u&gt;action OptimizeImports&lt;CR&gt;</span><br><span class="line">nnoremap \R :action Run&lt;cr&gt;</span><br><span class="line"></span><br><span class="line">nnoremap [[ :action MethodUp&lt;cr&gt;</span><br><span class="line">nnoremap ]] :action MethodDown&lt;cr&gt; </span><br></pre></td></tr></table></figure>

<p>加入后点击右上角的小图标进行刷新即可。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/blog/bd92c93c5430e968753dbdc0787e958c_MD5.webp" alt="ideavim"></p>
<p>上述配置文件实现了下面的功能：</p>
<ol>
<li><p>按下 j+k 或者 k+j 将会退出插入模式。</p>
</li>
<li><p>在可视模式下按 q 退出。</p>
</li>
<li><p>ctrl+o 可以实现指针回退到上一次的位置，ctrl+i 前进到上次的位置。可以类比为 VS 李的前进和后退按钮（一般查看定义查看的比较深，可以使用该命令回退或前进）。</p>
</li>
<li><p>, + r 可以实现 CLion 中的重构变量名。</p>
</li>
<li><p>U 取消撤销（由于 vim 中按 u 是撤销，而取消撤销需要 ctrl+r，这让人很不习惯）</p>
</li>
<li><p>&#x3D; + &#x3D;实现代码格式化。</p>
</li>
<li><p>c + c 实现代码注释</p>
</li>
<li><p>[ + [跳转到前一个函数位置</p>
</li>
<li><p>] + ] 跳转到下一个函数位置</p>
</li>
<li><p>\ + r 运行当前的可执行程序（如果当前代码段里面有运行按钮的话）</p>
</li>
<li><p>\ + R 运行当前可执行程序，这个是直接相当于按了右上角的三角按钮运行</p>
</li>
<li><p>\ + i 优化导入的包</p>
</li>
</ol>
<p>C++ 后端</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://circlereader.com/">官方主页</a></li>
<li><a target="_blank" rel="noopener" href="https://circlereader.com/download">下载新版</a></li>
<li><a target="_blank" rel="noopener" href="https://support.qq.com/products/317910">问题反馈</a></li>
<li><a target="_blank" rel="noopener" href="https://circlereader.com/donate">捐赠支持 ❤️</a></li>
</ul>
<p>浏览器扩展 Circle 阅读助手排版，版权归 juejin.cn 所有</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://icefjl.github.io">ICEFJL</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://icefjl.github.io/posts/%E5%BA%94%E7%94%A8/%E9%85%8D%E7%BD%AE/%E8%BD%AF%E4%BB%B6%E9%85%8D%E7%BD%AE/Clion%E9%85%8D%E7%BD%AE.html">http://icefjl.github.io/posts/应用/配置/软件配置/Clion配置.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://icefjl.github.io" target="_blank">Fu Jinlong's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/%E5%BD%92%E6%A1%A3/%E5%BD%92%E6%A1%A32.html" title="归档2"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/web/post4.jpg" onerror="onerror=null;src='/img/web/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">归档2</div></div></a></div><div class="next-post pull-right"><a href="/posts/%E5%BD%92%E6%A1%A3/%E5%BD%92%E6%A1%A31.html" title="归档1"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/web/post9.webp" onerror="onerror=null;src='/img/web/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">归档1</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/web/avatar.jpg" onerror="this.onerror=null;this.src='/img/web/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">ICEFJL</div><div class="author-info__description">Fu Jinlong's Blog</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">62</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">13</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">30</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/icefjl"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:fujinlong24@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%BB%E9%A2%98%E6%8E%A8%E8%8D%90"><span class="toc-number">1.</span> <span class="toc-text">主题推荐</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BC%96%E8%BE%91%E5%99%A8%E4%B8%8E-clang-format-%E8%AE%BE%E7%BD%AE"><span class="toc-number">2.</span> <span class="toc-text">编辑器与 clang-format 设置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%BC%A0%E6%A0%87%E6%BB%9A%E8%BD%AE%E6%94%B9%E5%8F%98%E5%AD%97%E4%BD%93%E5%A4%A7%E5%B0%8F"><span class="toc-number">2.1.</span> <span class="toc-text">鼠标滚轮改变字体大小</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#clang-format-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">2.2.</span> <span class="toc-text">clang-format 的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%91%E7%9A%84-clang-format-%E9%85%8D%E7%BD%AE"><span class="toc-number">2.2.1.</span> <span class="toc-text">我的 .clang-format 配置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E5%B7%A5%E5%85%B7%E9%93%BE%E8%AE%BE%E7%BD%AE"><span class="toc-number">3.</span> <span class="toc-text">编译工具链设置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E5%B7%A5%E5%85%B7%E9%93%BE%E7%9A%84%E6%B7%BB%E5%8A%A0%E4%B8%8E%E8%A7%A3%E9%87%8A"><span class="toc-number">3.1.</span> <span class="toc-text">编译工具链的添加与解释</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cmake-%E9%85%8D%E7%BD%AE%E9%A1%B9%E7%9A%84%E6%B7%BB%E5%8A%A0%E4%B8%8E%E8%A7%A3%E9%87%8A"><span class="toc-number">3.2.</span> <span class="toc-text">cmake 配置项的添加与解释</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#cmake-%E7%9A%84%E4%BD%BF%E7%94%A8%E4%B8%8E%E5%AE%9E%E6%88%98"><span class="toc-number">4.</span> <span class="toc-text">cmake 的使用与实战</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84-cmake-%E5%8F%98%E9%87%8F%EF%BC%88%E5%85%A5%E9%97%A8%EF%BC%89"><span class="toc-number">4.1.</span> <span class="toc-text">常用的 cmake 变量（入门）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84-cmake-%E5%91%BD%E4%BB%A4%EF%BC%88%E5%85%A5%E9%97%A8%EF%BC%89"><span class="toc-number">4.2.</span> <span class="toc-text">常用的 cmake 命令（入门）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ideaVim-%E7%9A%84%E4%BD%BF%E7%94%A8%E4%B8%8E%E8%AE%BE%E7%BD%AE"><span class="toc-number">5.</span> <span class="toc-text">ideaVim 的使用与设置</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/%E5%BA%94%E7%94%A8/%E9%85%8D%E7%BD%AE/%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/%E9%80%89%E6%8B%A9%E9%85%8D%E7%BD%AE.html" title="选择配置"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/web/post1.jpeg" onerror="this.onerror=null;this.src='/img/web/404.jpg'" alt="选择配置"/></a><div class="content"><a class="title" href="/posts/%E5%BA%94%E7%94%A8/%E9%85%8D%E7%BD%AE/%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/%E9%80%89%E6%8B%A9%E9%85%8D%E7%BD%AE.html" title="选择配置">选择配置</a><time datetime="2023-12-01T11:11:00.000Z" title="发表于 2023-12-01 19:11:00">2023-12-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/%E5%BD%92%E6%A1%A3/%E5%BF%AB%E6%8D%B7%E9%94%AE.html" title="快捷键"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/web/post7.jpg" onerror="this.onerror=null;this.src='/img/web/404.jpg'" alt="快捷键"/></a><div class="content"><a class="title" href="/posts/%E5%BD%92%E6%A1%A3/%E5%BF%AB%E6%8D%B7%E9%94%AE.html" title="快捷键">快捷键</a><time datetime="2023-12-01T08:07:57.000Z" title="发表于 2023-12-01 16:07:57">2023-12-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/%E5%BA%94%E7%94%A8/%E8%AF%AD%E8%A8%80/%E5%BD%92%E6%A1%A31/dot%E8%AF%AD%E8%A8%80.html" title="dot语言"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/web/post0.jpg" onerror="this.onerror=null;this.src='/img/web/404.jpg'" alt="dot语言"/></a><div class="content"><a class="title" href="/posts/%E5%BA%94%E7%94%A8/%E8%AF%AD%E8%A8%80/%E5%BD%92%E6%A1%A31/dot%E8%AF%AD%E8%A8%80.html" title="dot语言">dot语言</a><time datetime="2023-12-01T01:36:10.000Z" title="发表于 2023-12-01 09:36:10">2023-12-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/%E5%AD%A6%E4%B9%A0/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/Xmake/xmake%E4%BD%BF%E7%94%A8.html" title="xmake使用"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/web/post8.webp" onerror="this.onerror=null;this.src='/img/web/404.jpg'" alt="xmake使用"/></a><div class="content"><a class="title" href="/posts/%E5%AD%A6%E4%B9%A0/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/Xmake/xmake%E4%BD%BF%E7%94%A8.html" title="xmake使用">xmake使用</a><time datetime="2023-11-29T15:16:05.000Z" title="发表于 2023-11-29 23:16:05">2023-11-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/%E5%BA%94%E7%94%A8/%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7/Git/Git%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83%E5%BC%95%E5%85%A5%E6%8C%87%E5%8D%97.html" title="Git提交规范引入指南"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/web/post1.jpeg" onerror="this.onerror=null;this.src='/img/web/404.jpg'" alt="Git提交规范引入指南"/></a><div class="content"><a class="title" href="/posts/%E5%BA%94%E7%94%A8/%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7/Git/Git%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83%E5%BC%95%E5%85%A5%E6%8C%87%E5%8D%97.html" title="Git提交规范引入指南">Git提交规范引入指南</a><time datetime="2023-11-29T14:29:59.000Z" title="发表于 2023-11-29 22:29:59">2023-11-29</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/web/post6.webp')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By ICEFJL</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://fastly.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://fastly.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>function loadGiscus () {
  let nowTheme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'light'

  const config = Object.assign({
    src: 'https://giscus.app/client.js',
    'data-repo': 'icefjl/icefjl.github.io',
    'data-repo-id': 'MDEwOlJlcG9zaXRvcnkzOTEwMjIzNzg=',
    'data-category-id': 'DIC_kwDOF06HKs4CYIVf',
    'data-mapping': 'pathname',
    'data-theme': nowTheme,
    'data-reactions-enabled': '1',
    crossorigin: 'anonymous',
    async: true
  },{"data-strict":1,"data-lang":"zh-CN","data-input-position":"top"})

  let ele = document.createElement('script')
  for (let key in config) {
    ele.setAttribute(key, config[key])
  }
  document.getElementById('giscus-wrap').insertAdjacentElement('afterbegin',ele)
}

function changeGiscusTheme () {
  const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'light'

  function sendMessage(message) {
    const iframe = document.querySelector('iframe.giscus-frame');
    if (!iframe) return;
    iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
  }

  sendMessage({
    setConfig: {
      theme: theme
    }
  });
}

if ('Giscus' === 'Giscus' || !false) {
  if (false) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
  else loadGiscus()
} else {
  function loadOtherComment () {
    loadGiscus()
  }
}</script></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://fastly.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></body></html>